<source>
  @type systemd
  tag kubelet
  path /var/log/journal
  matches [{ "_SYSTEMD_UNIT": "kubelet.service" }]
  read_from_head true

  <storage>
    @type local
    path /var/log/fluentd-journald-kubelet-cursor.json
  </storage>

  <entry>
    fields_strip_underscores true
    fields_lowercase true
  </entry>
</source>

<match kubelet>
  @type logdna
  api_key $LOGDNA_INGESTION_KEY
  hostname "#{Socket.gethostname}"
</match>

<system>
  root_dir /var/log/fluentd
</system>
